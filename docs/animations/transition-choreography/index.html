<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-28","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Litho" href="/opensearch.xml"><title data-react-helmet="true">Customizing Transitions | Litho</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://fblitho.com/docs/animations/transition-choreography/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Customizing Transitions | Litho"><meta data-react-helmet="true" name="description" content="After the Animation basics the next natural step would be to create more complex transition animations. Litho provides several APIs to customize many aspects of the transitions and how different components can be animated together."><meta data-react-helmet="true" property="og:description" content="After the Animation basics the next natural step would be to create more complex transition animations. Litho provides several APIs to customize many aspects of the transitions and how different components can be animated together."><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://fblitho.com/docs/animations/transition-choreography/"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/animations/transition-choreography/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/animations/transition-choreography/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.3f64508b.css">
<link rel="preload" href="/assets/js/runtime~main.71ba95c3.js" as="script">
<link rel="preload" href="/assets/js/main.0ed1c32a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Litho</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro/motivation/">Docs</a><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a><a class="navbar__item navbar__link" href="/docs/tutorial/overview/">Tutorial</a><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">What is Litho?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Main Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Building lists</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Widgets</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Debugging</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Developer Tools</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Testing</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Animations</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations/transition-basics/">Animation basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations/transition-types/">Types of Transitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations/transition-all-layout/">Animating All Layout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/animations/transition-choreography/">Customizing Transitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations/transition-definitions/">Advanced: More ways to define transitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations/transition-key-types/">Advanced: Transitions key scoping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations/dynamic-props/">Animating View Properties with Dynamic Props</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Accessibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Performance</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deep Dive</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_1lV3"><div class="docItemContainer_zt2Y"><article><header><h1 class="docTitle_1y8q">Customizing Transitions</h1></header><div class="markdown"><p>After the <a href="/docs/animations/transition-basics/">Animation basics</a> the next natural step would be to create more complex transition animations. Litho provides several APIs to customize many aspects of the transitions and how different components can be animated together.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="staggers-sequences-and-parallel-sets">Staggers, Sequences, and Parallel Sets<a aria-hidden="true" class="hash-link" href="#staggers-sequences-and-parallel-sets" title="Direct link to heading">​</a></h3><p>Synchronising transitions objects can be done by wrapping them in one of the following animations sets: <code>parallel</code>, <code>sequence</code> and <code>stagger</code>. This transition sets can be nested within each other, e.g. you can have a stagger of parallel animation sets.</p><p>Example using a <code>stagger</code> set to animate 3 different rectangles.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@LayoutSpec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StaggerTransitionComponentSpec {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static final String YELLOW_KEY = &quot;YELLOW_KEY&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static final String BLUE_KEY = &quot;BLUE_KEY&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static final String PURPLE_KEY = &quot;PURPLE_KEY&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static final int PURPLE_COLOR = Color.rgb(144, 29, 191);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnCreateLayout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static Component onCreateLayout(ComponentContext c, @State boolean shown) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Row.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .heightPercent(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .child(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Row.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .child(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    SolidColor.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .widthDip(90)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .heightDip(40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .transitionKey(YELLOW_KEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .color(Color.YELLOW))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .child(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    SolidColor.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .widthDip(90)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .heightDip(40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .transitionKey(BLUE_KEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .color(Color.BLUE))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .child(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    SolidColor.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .widthDip(90)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .heightDip(40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .transitionKey(PURPLE_KEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .color(PURPLE_COLOR)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .clickHandler(StaggerTransitionComponent.onClickEvent(c))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .alignItems(shown ? YogaAlign.FLEX_END : YogaAlign.FLEX_START)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnCreateTransition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static Transition onCreateTransition(ComponentContext c) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Transition.stagger(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        100,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Transition.create(YELLOW_KEY).animate(AnimatedProperties.Y),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Transition.create(BLUE_KEY).animate(AnimatedProperties.Y),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Transition.create(PURPLE_KEY).animate(AnimatedProperties.Y));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnEvent(ClickEvent.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static void onClickEvent(ComponentContext c, @FromEvent View view) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StaggerTransitionComponent.onUpdateState(c);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnUpdateState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static void onUpdateState(StateValue&lt;Boolean&gt; shown) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shown.set(!shown.get());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><video loop="" autoplay="true" class="video" width="100%" height="500px"><source type="video/webm" src="/videos/transitions/stagger.webm"><p>Your browser does not support the video element.</p></video><p>Sequences and staggers also support interrupting behavior, trying to preserve the guarantee that a component will never jump and will always end up in the correct final position.</p><p>We can also use this sets to animate different properties of the same component, like in the following example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@LayoutSpec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StaggerTransitionSameComponentSpec {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static final String YELLOW_KEY = &quot;YELLOW_KEY&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnCreateLayout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static Component onCreateLayout(ComponentContext c, @State boolean shown) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Row.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .heightPercent(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .child(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Row.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .child(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    SolidColor.create(c)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .widthDip(90)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .heightDip(40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .transitionKey(YELLOW_KEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .color(Color.YELLOW)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .clickHandler(StaggerTransitionSameComponent.onClickEvent(c))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .justifyContent(shown ? YogaJustify.FLEX_END : YogaJustify.FLEX_START)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .alignItems(shown ? YogaAlign.FLEX_END : YogaAlign.FLEX_START)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnCreateTransition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static Transition onCreateTransition(ComponentContext c) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Transition.stagger(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        50,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Transition.create(YELLOW_KEY).animate(AnimatedProperties.Y),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Transition.create(YELLOW_KEY).animate(AnimatedProperties.X));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnEvent(ClickEvent.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static void onClickEvent(ComponentContext c, @FromEvent View view) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StaggerTransitionSameComponent.onUpdateState(c);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnUpdateState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static void onUpdateState(StateValue&lt;Boolean&gt; shown) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shown.set(!shown.get());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><video loop="" autoplay="true" class="video" width="100%" height="500px"><source type="video/webm" src="/videos/transitions/stagger3.webm"><p>Your browser does not support the video element.</p></video><h3 class="anchor anchorWithStickyNavbar_31ik" id="animators">Animators<a aria-hidden="true" class="hash-link" href="#animators" title="Direct link to heading">​</a></h3><p>Animators affect the rate in which we push new values to the animating components. An <code>Animator</code> can be added to any transition by using <code>.animator()</code> builder setting.
We provide two animators (spring based <a href="/javadoc/com/facebook/litho/Transition.SpringTransitionAnimator.html" target="_blank" rel="noopener noreferrer"><code>SpringTransitionAnimator</code></a> and a general timing-based <a href="/javadoc/com/facebook/litho/Transition.TimingTransitionAnimator.html" target="_blank" rel="noopener noreferrer"><code>TimingTransitionAnimator</code></a>) that can be configured to cover most use cases. It is also possible to add a custom by implementing <a href="/javadoc/com/facebook/litho/Transition.TransitionAnimator.html" target="_blank" rel="noopener noreferrer"><code>Transition.TransitionAnimator</code></a>.
By default, all transitions in Litho run by <a href="/javadoc/com/facebook/litho/Transition.SpringTransitionAnimator.html" target="_blank" rel="noopener noreferrer"><code>SpringTransitionAnimator</code></a> which is physics based and naturally interruptible. You can tune the parameters of this spring by creating another <code>Animator</code> using <code>Transition.springWith()</code> and pass custom tension and friction. . On the other hand, <a href="/javadoc/com/facebook/litho/Transition.TimingTransitionAnimator.html" target="_blank" rel="noopener noreferrer"><code>TimingTransitionAnimator</code></a> provides more customisation as we can set a total time and an <code>Interpolator</code>. To do this we provide an easy builder <code>Transition.timing()</code> that received the total time and an optional <code>Interpolator</code>.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The <a href="/javadoc/com/facebook/litho/Transition.TimingTransitionAnimator.html" target="_blank" rel="noopener noreferrer"><code>TimingTransitionAnimator</code></a> default interpolator is an <code>AccelerateDecelerateInterpolator</code> so keep in mind that adding this animator to only a few transitions in a set (like the example below) could create unwanted behavior.</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@OnCreateTransition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static Transition onCreateTransition(ComponentContext c) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return Transition.parallel(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Transition.create(YELLOW_KEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .animate(AnimatedProperties.Y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .animator(Transition.springWithConfig(120, 12)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Transition.create(BLUE_KEY).animate(AnimatedProperties.Y).animator(Transition.timing(1000)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Transition.create(PURPLE_KEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .animate(AnimatedProperties.Y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .animator(Transition.timing(1000, new BounceInterpolator())));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><video loop="" autoplay="true" class="video" width="100%" height="500px"><source type="video/webm" src="/videos/transitions/stagger4.webm"><p>Your browser does not support the video element.</p></video><h3 class="anchor anchorWithStickyNavbar_31ik" id="transition-end-callback">Transition end callback<a aria-hidden="true" class="hash-link" href="#transition-end-callback" title="Direct link to heading">​</a></h3><p>A listener can be added to receive a callback when an individual transition has ended. This is done through the Litho event dispatcher. See <a href="/docs/mainconcepts/coordinate-state-actions/events/">Events overview</a>.
The <code>TransitionEndEvent</code> will be called with the transition key and the specific <code>AnimatedProperty</code> that has been animated for that key. If multiple <code>AnimatedProperty</code>s are added to the same transition, and all of them run at the same time, a callback will be excecuted for each one of those.
In many cases this callback may be useful to loop animations by updating the tree. Many examples can be found in the Litho Sample app: <code>API Demos</code>-&gt;<code>Animation Callbacks</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@OnEvent(TransitionEndEvent.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static void onTransitionEndEvent(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ComponentContext c,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @FromEvent String transitionKey,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @FromEvent AnimatedProperty property,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @State boolean isLooping) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SequenceTransitionLoopComponent.onUpdateState(c, false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@OnCreateTransition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static Transition onCreateTransition(ComponentContext c) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return Transition.sequence(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Transition.create(YELLOW_KEY).animate(AnimatedProperties.Y),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Transition.create(BLUE_KEY).animate(AnimatedProperties.Y),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Transition.create(PURPLE_KEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .animate(AnimatedProperties.Y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          .transitionEndHandler(SequenceTransitionLoopComponent.onTransitionEndEvent(c)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can also add the transition end handler to the <code>Transition.allLayout()</code> and the same logic applies.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@OnCreateTransition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static Transition onCreateTransition(ComponentContext c) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Transition.allLayout().transitionEndHandler(MyComponentSpec.onTransitionEndEvent(c));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div></div><br><div class="row"><div class="col"><a href="https://github.com/facebook/litho/edit/master/website/../docs/animations/transition-choreography.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/animations/transition-all-layout/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Animating All Layout</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/animations/transition-definitions/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Advanced: More ways to define transitions<!-- --> »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#staggers-sequences-and-parallel-sets" class="table-of-contents__link toc-highlight">Staggers, Sequences, and Parallel Sets</a></li><li><a href="#animators" class="table-of-contents__link toc-highlight">Animators</a></li><li><a href="#transition-end-callback" class="table-of-contents__link toc-highlight">Transition end callback</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting Started</a></li><li class="footer__item"><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Open Source</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/contributing/">How To Contribute</a></li><li class="footer__item"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Open Source Projects<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/fblitho" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright © 2021 Facebook, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.71ba95c3.js"></script>
<script src="/assets/js/main.0ed1c32a.js"></script>
</body>
</html>